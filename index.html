<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" type="image/png" href="favicon.png"/>
    <link rel="stylesheet" type="text/css" href="html5reset.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href='https://fonts.googleapis.com/css?family=Space+Mono' rel='stylesheet'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Permanent Pixels NFT Minting Website</title>

    <script src="js/web3.min.js"
        charset="utf-8"
        type="text/javascript">
    </script>

    <script>
        const { ethereum } = window;
        const web3 = new Web3(ethereum);

        const checkEthereum = () => {
            return ethereum && ethereum.isMetaMask;
        }

        const checkNetwork = async () => {
            let networkId = await getNetVersion();

            return checkEthereum && networkId == 80001;
        }

        const mint = async (amount) => {
            if (checkNetwork) {
                console.log("good network");
                const contract = await getContract();
                let account = await getAccounts[0];

                if (contract && account) {
                    contract.methods.mint(amount).send({from: account});
                }
            }
            else {
                window.alert("Bad network!");
            }
        }

        const getAbi = async () => {
            let response = await fetch('abi.txt');
            let text = await response.text();
            let abi = JSON.parse(text);

            return abi;
        }

        const getContract = async () => {
            let abi = await getAbi();
            return new web3.eth.Contract(abi, '0x88E8FA1120Cf7AcA2FB537158C416FC06C4fe071');
        }

        const getNetVersion = async () => {
            let response = await ethereum.request({method: 'net_version'});
            return response;
        }

        const getAccounts = async () => {
            const contract = await getContract();

            return await ethereum.request({method: "eth_requestAccounts"});
        }

        const connect = async () => {
            const contract = await getContract();
            
            if (ethereum && ethereum.isMetaMask) {

                
            }
        }
    </script>
  </head>
    <body>
        <main>
            <h1>Permanent Pixels NFT Minting Website</h1>
            <div class="squares">
                <div class="card">
                    <h2 class="red">Attention! Please read the information below before minting. Do not proceed if you do not understand this information. Minting is done with the</h2> <h2 class="green">green buttons</h2> <h2 class="red">at the bottom of the page.</h2>

                    <p>-Each Permanent Pixel costs: .33 Matic<br>

                    -You can mint up to 1000 NFTs at a time<br>

                    -1000 NFTs = 1/10,000 of the max supply<br>

                    -There is no limit to the number of NFTs a wallet can mint<br>

                    -Permanent Pixels are on the Polygon blockchain<br>

                    -The Permanent Pixels team takes no royalty on secondary sales<br>

                    -If you receive a "transaction expected to fail" message when minting, do not mint<br>

                    -The contract address is: X089808908080980

                    </p>
                </div>
                <div class="card">
                    <h2>How to reveal:</h2>
                    <p>-To reveal your NFTs on OpenSea: visit the page for each NFT you would like to reveal and select the "Refresh Metadata" button in the upper right corner of the screen, and reload the page.<br>

                    -There will be a delay between the time a NFT is minted and the time it can be revealed. If your NFT does not reveal instantly after selection the "refresh Metadata" button and reloading the page, wait a few minutes and come back later.</p>
                </div>
                <div class="card">
                    <h2>Metadata and Rarity:</h2>
                    <p>-Each NFT will have a "skew" attribute that does not affect rarity:<br>

                    -White = more white than black pixels in the image<br>

                    -Black = more black than white pixels in the image<br>

                    -None = equal number of black and white pixels in the image<br>

                    -Each NFT will have a "rarity" level:<br>

                    -The higher the rarity level, the more rare the NFT is<br>

                    -The lowest rarity score is 0<br>

                    -The highest rarity score is 2500<br>

                    -The difficulty of receiving a high rarity score increases on an exponential scale
                    </p>
                </div>
                <div class="card">
                    <h2>Mint using the green buttons below:</h2>
                    <div class="buttons">
                        <a onclick="mint(5)">
                            <div class="minter">
                                <p>Mint 5</p>
                            </div>
                        </a>
                        <div class="minter">
                            <p>Mint 10</p>
                        </div>
                        <div class="minter">
                            <p>Mint 100</p>
                        </div>
                        <div class="minter">
                            <p>Mint 1000</p>
                        </div>
                        <div class="minter">
                            <p>Custom</p>
                            <p>Enter custom number</p>
                            <p>Mint</p>
                        </div>
                    </div>
                    <p>Total supply minted: 10/10000000</p>
                </div>
            </div>
        </main>
        <footer>
            <p>Legal</p>
        </footer>
    </body>
</html>
